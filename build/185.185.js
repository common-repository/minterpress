"use strict";(self.webpackChunkminterpress=self.webpackChunkminterpress||[]).push([[185],{3649:(t,e,i)=>{i.d(e,{Z:()=>s});class s{static hiddenClass="hidden";static toggleButtons(t,e,i){t?(e.disabled=!0,i.disabled=!1):(i.disabled=!0,e.disabled=!1)}static show(t){t&&t.classList.remove(this.hiddenClass)}static hide(t){t&&t.classList.add(this.hiddenClass)}static toggleVisibility(t){t.classList.contains(this.hiddenClass)?this.show(t):this.hide(t)}static turnOnConfirmExit(){window.onbeforeunload=()=>!0}static turnOffConfirmExit(){window.onbeforeunload=null}}},8023:(t,e,i)=>{i.d(e,{Z:()=>n});var s=i(9669),a=i.n(s);class n{static getCredentials(){return{credentials:"include",headers:{"content-type":"application/json","X-WP-Nonce":wpApiSettings.nonce}}}static getPinataKeyEndpoint(){return`${wpApiSettings.root}minterpress/v1/pinata`}static getNftWpEndpoint(){return`${wpApiSettings.root}${wpApiSettings.versionString}minterpress_nfts`}static getGalleryWpEndpoint(){return`${wpApiSettings.root}${wpApiSettings.versionString}minterpress_gallery`}static async getPinataKeys(){const t=await a().get(this.getPinataKeyEndpoint(),this.getCredentials());return{pinataApiKey:t?.data?.api_key,pinataApiSecret:t?.data?.api_secret}}static async postToAjax(t,e=null){await jQuery.post(ajaxurl,t,(t=>(e&&(e.innerHTML=t),t)))}static prepareMetaData(t,e){return t.meta={},e.map((e=>{t.fieldName&&(t.meta[e]=t[e],delete t[e])})),t}static async saveNftDraft(t,e=null){const i=this.getCredentials(),s=new URLSearchParams(window.location.search),n=e??s.get("id"),r=t.entries(),o=Object.fromEntries(r),d=this.prepareMetaData(o,["mintQuantity","wpImageUrl","mintDescription"]);try{const t=(await a().post(`${this.getNftWpEndpoint()}/${n??""}`,d,i))?.data?.id;return t}catch(t){console.error("Error creating WP draft:",t)}}static async createGallery(t){const e=this.getCredentials(),i=t.entries(),s=Object.fromEntries(i),n=this.prepareMetaData(s,["tz_address"]);try{const t=(await a().post(this.getGalleryWpEndpoint(),n,e))?.data?.id;return await a().post(`${this.getGalleryWpEndpoint()}/${t}`,{status:"publish"},e),console.log(`Published WP Gallery with WP ID ${t}`),t}catch(t){console.error("Error creating WP draft:",t)}}static async updateGallery(t,e){return await a().post(`${this.getGalleryWpEndpoint()}/${t}`,e,this.getCredentials())}static async publishWpNft(t,e){if(console.log(e),!t||!e.opHash)return void console.error("Missing required paramenters.");const i=this.getCredentials();try{const s=await a().post(`${this.getNftWpEndpoint()}/${t}`,{status:"publish",meta:e},i);return console.log(`Published WP NFT with WP ID ${t} and op hash ${e.opHash}`),s}catch(t){console.error("Error publishing wp NFT:",t)}}}},6185:(t,e,i)=>{i.r(e),i.d(e,{default:()=>n});var s=i(8023),a=i(3649);class n{constructor(t){this.el=t,this.init()}setVars(){this.nftId=this.el.dataset.nftOrderId,this.input=this.el.querySelector("input")}bindEvents(){this.input.addEventListener("change",(async t=>{a.Z.turnOnConfirmExit();const e=t.target.value,i={action:"update_nft",id:this.nftId,meta:{order:e}};await s.Z.postToAjax(i),a.Z.turnOffConfirmExit()}))}init(){this.setVars(),this.bindEvents()}}}}]);