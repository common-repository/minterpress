"use strict";(self.webpackChunkminterpress=self.webpackChunkminterpress||[]).push([[115],{3649:(t,e,s)=>{s.d(e,{Z:()=>i});class i{static hiddenClass="hidden";static toggleButtons(t,e,s){t?(e.disabled=!0,s.disabled=!1):(s.disabled=!0,e.disabled=!1)}static show(t){t&&t.classList.remove(this.hiddenClass)}static hide(t){t&&t.classList.add(this.hiddenClass)}static toggleVisibility(t){t.classList.contains(this.hiddenClass)?this.show(t):this.hide(t)}static turnOnConfirmExit(){window.onbeforeunload=()=>!0}static turnOffConfirmExit(){window.onbeforeunload=null}}},8023:(t,e,s)=>{s.d(e,{Z:()=>a});var i=s(9669),r=s.n(i);class a{static getCredentials(){return{credentials:"include",headers:{"content-type":"application/json","X-WP-Nonce":wpApiSettings.nonce}}}static getPinataKeyEndpoint(){return`${wpApiSettings.root}minterpress/v1/pinata`}static getNftWpEndpoint(){return`${wpApiSettings.root}${wpApiSettings.versionString}minterpress_nfts`}static getGalleryWpEndpoint(){return`${wpApiSettings.root}${wpApiSettings.versionString}minterpress_gallery`}static async getPinataKeys(){const t=await r().get(this.getPinataKeyEndpoint(),this.getCredentials());return{pinataApiKey:t?.data?.api_key,pinataApiSecret:t?.data?.api_secret}}static async postToAjax(t,e=null){await jQuery.post(ajaxurl,t,(t=>(e&&(e.innerHTML=t),t)))}static prepareMetaData(t,e){return t.meta={},e.map((e=>{t.fieldName&&(t.meta[e]=t[e],delete t[e])})),t}static async saveNftDraft(t,e=null){const s=this.getCredentials(),i=new URLSearchParams(window.location.search),a=e??i.get("id"),n=t.entries(),o=Object.fromEntries(n),l=this.prepareMetaData(o,["mintQuantity","wpImageUrl","mintDescription"]);try{const t=(await r().post(`${this.getNftWpEndpoint()}/${a??""}`,l,s))?.data?.id;return t}catch(t){console.error("Error creating WP draft:",t)}}static async createGallery(t){const e=this.getCredentials(),s=t.entries(),i=Object.fromEntries(s),a=this.prepareMetaData(i,["tz_address"]);try{const t=(await r().post(this.getGalleryWpEndpoint(),a,e))?.data?.id;return await r().post(`${this.getGalleryWpEndpoint()}/${t}`,{status:"publish"},e),console.log(`Published WP Gallery with WP ID ${t}`),t}catch(t){console.error("Error creating WP draft:",t)}}static async updateGallery(t,e){return await r().post(`${this.getGalleryWpEndpoint()}/${t}`,e,this.getCredentials())}static async publishWpNft(t,e){if(console.log(e),!t||!e.opHash)return void console.error("Missing required paramenters.");const s=this.getCredentials();try{const i=await r().post(`${this.getNftWpEndpoint()}/${t}`,{status:"publish",meta:e},s);return console.log(`Published WP NFT with WP ID ${t} and op hash ${e.opHash}`),i}catch(t){console.error("Error publishing wp NFT:",t)}}}},1115:(t,e,s)=>{s.r(e),s.d(e,{default:()=>a});var i=s(8023),r=s(3649);class a{constructor(t){this.el=t,this.init()}setVars(){this.nftPreview=this.el.querySelector(".nft-card"),this.form=this.el.querySelector("form"),this.borderRadius=this.el.querySelector("#borderRadius"),this.borderWidth=this.el.querySelector("#borderWidth"),this.borderColor=this.el.querySelector("#borderColor"),this.fontFamily=this.el.querySelector("#fontFamily"),this.textColor=this.el.querySelector("#textColor"),this.cardColor=this.el.querySelector("#cardColor"),this.themeInputs=this.el.querySelectorAll(".theme-input"),this.themeUiFeedback=document.querySelector("#minterpress-app-notice-nft-theme")}bindEvents(){this.themeInputs.forEach((t=>{t.addEventListener("change",(t=>this.updateStyles(t)))})),this.form.addEventListener("submit",(t=>this.handleSubmit(t))),this.form.addEventListener("reset",(t=>this.handleReset(t)))}updateStyles(t,e=!1){if("range"===t?.currentTarget?.type){const e=t.currentTarget;this.setRangeInput(e)}this.nftPreview.style.setProperty("--nft-card-border-width",`${e?this.borderWidth.defaultValue:this.borderWidth.value}px`),this.nftPreview.style.setProperty("--nft-card-border-color",e?this.borderColor.defaultValue:this.borderColor.value),this.nftPreview.style.setProperty("--nft-card-radius",`${e?this.borderRadius.defaultValue:this.borderRadius.value}px`),this.nftPreview.style.setProperty("--nft-card-text-color",e?this.textColor.defaultValue:this.textColor.value),this.nftPreview.style.setProperty("--nft-card-card-color",e?this.cardColor.defaultValue:this.cardColor.value),this.nftPreview.style.setProperty("--nft-card-font-family",e?this.fontFamily.defaultValue:this.fontFamily.value)}async handleSubmit(t){t.preventDefault();const e=new FormData(this.form).entries(),s=Object.fromEntries(e),a=JSON.stringify(s),n={action:"update_options",options:JSON.stringify({mp_theme:a})};try{await i.Z.postToAjax(n)}catch(t){this.themeUiFeedback.querySelector("p").innerText="Sorry, there was an error saving your theme settings."}finally{r.Z.show(this.themeUiFeedback),this.themeUiFeedback.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})}}handleReset(t){this.updateStyles(t,!0),this.setRangeInput(this.borderRadius,!0),this.setRangeInput(this.borderWidth,!0)}setRangeInput(t,e=!1){const s=t.min,i=t.max,r=e?t.defaultValue:t.value;t.style.setProperty("--rangeProgress",(r-s)/(i-s)*100+"%")}init(){this.setVars(),this.bindEvents(),this.updateStyles(),this.setRangeInput(this.borderRadius),this.setRangeInput(this.borderWidth)}}}}]);